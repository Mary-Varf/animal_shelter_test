(this["webpackJsonpanimal-shelter-test"]=this["webpackJsonpanimal-shelter-test"]||[]).push([[0],{66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(16),r=a.n(c),s=a(3),i=a(8),l=a(0),o=function(){return Object(l.jsx)("header",{children:Object(l.jsx)("nav",{className:"red lighten-1",children:Object(l.jsxs)("div",{className:"nav-wrapper",children:[Object(l.jsx)(i.b,{to:"/animals",className:"brand-logo left cursor",children:"\u041f\u0440\u0438\u044e\u0442 \u21161"}),Object(l.jsx)("ul",{className:"right",children:Object(l.jsx)("li",{children:Object(l.jsx)(i.b,{to:"/today",className:"cursor",id:"mob-dn",children:"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043d\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f"})})})]})})})},d=function(){return Object(l.jsx)("footer",{className:"page-footer red lighten-1",children:Object(l.jsx)("div",{className:"footer-copyright",children:Object(l.jsxs)("div",{className:"container cursor",children:["\xa9 ",(new Date).getFullYear()," Animals"]})})})},j=function(){window.location.assign("/login")},u=a(5),b=a(25),O=a(15),h=a.n(O),m="https://acits-api.herokuapp.com/api/",g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(localStorage.getItem("access"))return h.a.get("".concat(m,"v1/animals/").concat(e),{headers:{Authorization:"Bearer "+localStorage.getItem("access"),"current-shelter":"1"}});window.location.assign("/login")},x=function(e){return{type:"LOGIN_ERROR",loginError:e}},f=function(e){return{type:"TODAY_ERROR",todayError:e}},p=function(e){return{type:"TOGGLE_LOADING",loading:e}},v=function(e){return{type:"GET_TODAY_DATA",todayData:e}},N=function(e){return{type:"GET_ANIMALS_DATA",animalsData:e}},y=function(e){return{type:"TOGGLE_TODAY_READY",todayReady:e}},_=function(e){return{type:"CREATE_NEXT_PAGE",nextPage:e}},E=function(e){return{type:"CREATE_ANIMAL_DATA",animalCardData:e}},A=Object(u.b)((function(e){return{state:e}}),(function(e){return{addTodayData:function(t){return e(v(t))}}}))((function(e){var t=e.state,a=t.loginError,c=t.loginReady,r=Object(n.useState)("test_user_1"),s=Object(b.a)(r,2),i=s[0],o=s[1],d=Object(n.useState)("user10000"),j=Object(b.a)(d,2),O=j[0],g=j[1],f=Object(u.c)();return Object(n.useEffect)((function(){f(c?function(e){return{type:"LOGIN_READY",loginReady:e}}(!1):x(!0))}),[a]),Object(l.jsxs)("div",{className:"container w-500 ",children:[Object(l.jsx)("h3",{className:"center-align",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(l.jsxs)("form",{className:"s12",action:"post",children:[Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("div",{className:"input-field col w-500",children:Object(l.jsx)("input",{type:"text",placeholder:"Login",id:"login",onChange:function(e){o(e.target.value)},value:"test_user_1"})})}),Object(l.jsx)("div",{className:"row",children:Object(l.jsx)("div",{className:"input-field col w-500",children:Object(l.jsx)("input",{id:"password",type:"password","data-length":"30",value:"user10000",placeholder:"Password",onChange:function(e){g(e.target.value),f(x(!1))}})})}),Object(l.jsxs)("div",{className:"center-align",children:[a?Object(l.jsx)("p",{className:"red-text",children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435 \u0432\u0435\u0440\u043d\u043e"}):"",Object(l.jsx)("button",{className:"waves-effect waves-light btn red lighten-1 ",onClick:function(e){e.preventDefault(),(i.length>0||O.length>0)&&function(e,t){return h.a.post("".concat(m,"token/"),{headers:{"Content-Type":"application/json"},username:e,password:t})}(i,O).then((function(e){localStorage.setItem("access",e.data.access),window.location.assign("/today")})).catch((function(e){f(x(!0)),console.log("\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435 \u0432\u0435\u0440\u043d\u043e")}))},children:"\u0412\u043e\u0439\u0442\u0438"})]})]})]})})),w=function(e){var t="animal/animalCard/".concat(e.item.animal.id);return Object(l.jsx)("div",{className:"col s12 m2",children:Object(l.jsxs)("div",{className:"card red lighten-1 j-c",children:[Object(l.jsxs)("div",{className:"card-content white-text valign  right",children:[Object(l.jsx)(i.b,{to:t,children:Object(l.jsx)("span",{className:"card-title white-text",children:e.item.animal.name})}),Object(l.jsxs)("p",{children:["\u041f\u043e\u0440\u043e\u0434\u0430: ",e.item.animal.spec_name]})]}),Object(l.jsxs)("div",{className:"card-content white-text left align-right",children:[Object(l.jsx)("b",{children:Object(l.jsxs)("p",{children:["\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435: ",e.item.my_type]})}),Object(l.jsx)("p",{children:"\u041f\u0440\u0435\u043f\u0430\u0440\u0430\u0442\u044b: "}),Object(l.jsxs)("p",{children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435: ",e.item.drugs[0].drug_name]}),Object(l.jsxs)("p",{children:["\u0414\u043e\u0437\u0430: ",e.item.drugs[0].drug_dosage," ",e.item.drugs[0].form_of_drug]})]})]})})},D=function(){return Object(l.jsx)("div",{className:"progress",children:Object(l.jsx)("div",{className:"indeterminate"})})},T=Object(u.b)((function(e){return{state:e}}),(function(e){return{addTodayData:function(t){return e(v(t))},toggleTodayReady:function(t){return e(y(t))},toggleTodayError:function(t){return e(f(t))},toggleLoading:function(t){return e(p(t))}}}))((function(e){var t=Object(u.c)(),a=e.state,c=a.todayData,r=a.todayReady,s=a.todayError,i=a.loading;a.nextPage;return Object(n.useEffect)((function(){t(p(!0)),c.length||(function(){if(localStorage.getItem("access"))return h.a.get("".concat(m,"v1/prescriptions/today/"),{headers:{Authorization:"Bearer "+localStorage.getItem("access"),"current-shelter":"1"}});window.location.assign("/login")}().then((function(e){t(v(e.data.results))})).then((function(e){t(y(!0)),t(p(!1))})).catch((function(e){t(p(!1)),t(f(!0)),window.location.assign("/login")})),g().then((function(e){t(N(e.data.results)),t(_(e.data.next))}))),t(p(!1))}),[r]),Object(l.jsx)("div",{className:"j-center",children:s?Object(l.jsx)("h4",{children:"Sorry, something went wrong, please try again later."}):i?Object(l.jsx)(D,{}):Object(l.jsxs)("div",{className:"j-center center",children:[Object(l.jsx)("h1",{children:"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043d\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),c.map((function(e,t){return Object(l.jsx)(w,{item:e},t)}))]})})})),R=Object(u.b)((function(e){return{state:e}}),(function(e){return{dispatch:function(e){return E(e)}}}))((function(e){var t=Object(u.c)(),a=Object(s.g)().id,c=e.state,r=c.animalCardData,i=c.loading,o=Object(s.f)().goBack;return Object(n.useEffect)((function(){t(p(!0)),function(e){if(localStorage.getItem("access"))return h.a.get("".concat(m,"v1/animals/").concat(e),{headers:{Authorization:"Bearer "+localStorage.getItem("access"),"current-shelter":"1"}});window.location.assign("/login")}(a).then((function(e){if(e.data.animal_attributes[1])t(E(e.data));else{var a={name:e.data.name,animal_attributes:[{value:"\u043d\u0435\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438"},{value:"\u043d\u0435\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438"},{value:e.data.animal_attributes[0].value},{value:"\u043d\u0435\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438"}]};console.log(a),t(E(a))}console.log(r),t(p(!1))}))}),[]),i?Object(l.jsx)(D,{}):Object(l.jsx)("div",{className:"col s12 m6",children:Object(l.jsxs)("div",{className:"card red lighten-1 ",children:[Object(l.jsxs)("div",{className:"card-content white-text right",children:[Object(l.jsx)("span",{className:"card-title",children:r.name}),Object(l.jsx)("br",{}),Object(l.jsxs)("p",{children:["\u0420\u043e\u0441\u0442: ",r.animal_attributes[0].value]}),Object(l.jsxs)("p",{children:["\u0412\u0435\u0441: ",r.animal_attributes[1].value]}),Object(l.jsxs)("p",{children:["\u041f\u043e\u043b: ",r.animal_attributes[2].value]}),Object(l.jsxs)("p",{children:["\u0426\u0432\u0435\u0442: ",r.animal_attributes[3].value]}),Object(l.jsxs)("p",{children:["\u0422\u0438\u043f: ",r.spec_parent_name]}),Object(l.jsxs)("p",{children:["\u041f\u043e\u0434\u0442\u0438\u043f: ",r.spec_name]})]}),Object(l.jsx)("div",{className:"card-content abs-position",children:Object(l.jsx)("img",{src:"http://placehold.it/400x250/",alt:"\u0417\u0430\u0433\u043b\u0443\u0448\u043a\u0430"})}),Object(l.jsx)("div",{className:"card-action",children:Object(l.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),o()},children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f"})})]})})})),G=a(26),C=function(e){var t="animal/animalCard/".concat(e.item.id);return Object(l.jsx)("div",{className:"col s12 m6",children:Object(l.jsx)("div",{className:"card red lighten-1",children:Object(l.jsxs)("div",{className:"card-content white-text",children:[Object(l.jsx)(i.b,{to:t,className:"hover",children:Object(l.jsx)("span",{className:"card-title white-text",children:e.item.name})}),Object(l.jsxs)("p",{children:["\u041f\u043e\u0440\u043e\u0434\u0430: ",e.item.spec_parent_name]}),Object(l.jsxs)("p",{children:["\u0422\u0438\u043f: ",e.item.spec_name]})]})})})},I=Object(u.b)((function(e){return{state:e}}),(function(e){return{addAnimalsData:function(t){return e(N(t))},addNextPage:function(t){return e(_(t))}}}))((function(e){var t=Object(u.c)(),a=e.state,c=a.animalsData,r=a.nextPage,s=a.loading;Object(n.useEffect)((function(){t(p(!0)),c.length<1&&g().then((function(e){t(N(e.data.results)),t(p(!1))})).catch((function(e){console.log(e),window.location.assign("/login")})),t(p(!1))}),[]);return Object(l.jsx)("div",{className:"center",children:c?Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"\u0416\u0438\u0432\u043e\u0442\u043d\u044b\u0435 \u0432 \u043f\u0440\u0438\u044e\u0442\u0435:"}),s?Object(l.jsx)(D,{}):Object(l.jsxs)(l.Fragment,{children:[c.map((function(e,t){return Object(l.jsx)(C,{item:e},t)})),Object(l.jsx)("button",{className:"waves-effect waves-light btn red lighten-1 ",onClick:function(){g(r.slice(15)).then((function(e){t(N([].concat(Object(G.a)(c),Object(G.a)(e.data.results)))),t(_(e.data.next))}))},children:"\u041f\u041e\u043a\u0430\u0437\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435"})]})]}):Object(l.jsx)(D,{})})})),L=function(){return Object(l.jsx)("h1",{children:"The page is not found"})},S=(a(66),function(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)(i.a,{basename:"/",children:[Object(l.jsx)(o,{}),Object(l.jsx)("main",{className:"container content",children:Object(l.jsxs)(s.c,{children:[Object(l.jsx)(s.a,{exact:!0,path:"/",component:j}),Object(l.jsx)(s.a,{exact:!0,path:"/login",component:A}),Object(l.jsx)(s.a,{exact:!0,path:"/today",component:T}),Object(l.jsx)(s.a,{exact:!0,path:"/animals",component:I}),Object(l.jsx)(s.a,{exact:!0,path:"/animal/animalCard/:id",component:R}),Object(l.jsx)(s.a,{component:L})]})}),Object(l.jsx)(d,{})]})})}),Y=a(18),P=a(4),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return Object(P.a)(Object(P.a)({},e),{},{loginError:t.loginError});case"TODAY_ERROR":return Object(P.a)(Object(P.a)({},e),{},{todayError:t.todayError});case"TOGGLE_LOADING":return Object(P.a)(Object(P.a)({},e),{},{loading:t.loading});case"LOGIN_READY":return Object(P.a)(Object(P.a)({},e),{},{loginReady:t.loginReady});case"GET_TODAY_DATA":return Object(P.a)(Object(P.a)({},e),{},{todayData:t.todayData});case"GET_ANIMALS_DATA":return Object(P.a)(Object(P.a)({},e),{},{animalsData:t.animalsData});case"TOGGLE_TODAY_READY":return Object(P.a)(Object(P.a)({},e),{},{todayReady:t.todayReady});case"CREATE_NEXT_PAGE":return Object(P.a)(Object(P.a)({},e),{},{nextPage:t.nextPage});case"CREATE_ANIMAL_DATA":return Object(P.a)(Object(P.a)({},e),{},{animalCardData:t.animalCardData});default:return e}},B={loginError:!1,loginReady:!0,animalsData:[],todayData:[],todayReady:!1,todayError:!1,loading:!1,nextPage:"",animalCardData:{name:"",animal_attributes:[{value:""},{value:""},{value:""},{value:""}]}},M=Object(Y.b)(k,B);r.a.render(Object(l.jsx)(u.a,{store:M,children:Object(l.jsx)(i.a,{children:Object(l.jsx)(S,{})})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.aafeef27.chunk.js.map